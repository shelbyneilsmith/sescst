<div class="report-widget">
	<a ng-click="destroyWidget(widget.id)" class="remove-widget glyphicon glyphicon-remove"></a>

	<form class='post-field' ng-show="widgetTitleEdit" ng-submit='updateWidgetTitle("save")'>
		<input type="text" ng-model="widgetNewTitle" ng-init="" />
		<a ng-show='widgetTitleEdit' class='btn small btn-primary save-link' ng-click='updateWidgetTitle("save")'>Save</a>
		<a ng-show='widgetTitleEdit' class='btn small btn-primary cancel-link' ng-click='updateWidgetTitle("cancel")'>Cancel</a>
	</form>
	<h3 class="hover-link subtitled" ng-show="!widgetTitleEdit">{[ widget.title ]} <a class="edit-link" ng-click="widgetTitleEdit = !widgetTitleEdit; widgetNewTitle = widget.title">Edit</a>

	<div class="subtitle">
		<div class="hover-link" ng-show="!widgetTypeEdit"><span class="small">{[ widget.typeLabel ]}</span> <a class="edit-link" ng-click="widgetTypeEdit = !widgetTypeEdit">Edit</a></div>

		<select ng-init="selectedWidgetType=selectedWidgetType || $parent.widgetOptions[0]" ng-show="widgetTypeEdit" class="form-control" ng-model="selectedWidgetType" ng-options="option.label for option in $parent.widgetOptions"></select>
		<a ng-show='widgetTypeEdit' class='btn small btn-primary save-link' ng-click='updateWidgetType("save")'>Save</a>
		<a ng-show='widgetTypeEdit' class='btn small btn-primary cancel-link' ng-click='updateWidgetType("cancel")'>Cancel</a>
	</div>
	</h3>

	<p class="filter">Filtered by {[widget.filter.filterSelect.label]}: {[widget.filter.filterDetail | displayFilterVal : widget.filter]}</p>

 	<h4>Metrics <span class="subtitle">What data are we comparing?</span></h4>
	<a class="round-controls collapsible-control btn btn-small" ng-click="metricsCollapsed = !metricsCollapsed"><span ng-class="metricsCollapsed ? 'glyphicon-chevron-down' : 'glyphicon-chevron-up'" class="glyphicon glyphicon-chevron-up"></span></a>
	<div class="widget-collapsible" ng-class="metricsCollapsed ? 'collapsed' : 'expanded'">
		<label>Compare By:</label>
		<h5>X Axis</h5>
		<chart-metrics axis="x" opts="widgetXMetricOpts" model="widget.metrics.x"></chart-metrics>

		<h5>Y Axis</h5>
		<chart-metrics axis="y" opts="widgetYMetricOpts[$parent.reportType]" model="widget.metrics.y"></chart-metrics>
		<button class="btn btn-primary" ng-click="updateWidget()">Update Chart</button>
	</div>

	<div class="chart-container">
		<canvas id="{[ widget.id ]}-{[ widget.type ]}" class="chart-canvas" width="400" height="400"></canvas>
	</div>
</div>
