<form class='post-field' ng-submit='addItem()'>
	<fieldset class='form-group'>
		<input json-text id='{[ fieldName ]}' name='{[ fieldName ]}' type='text' ng-hide='true' ng-model='inData'><br />

		<table ng-if='inData' class='table table-striped table-hover table-responsive'>
			<thead>
				<tr>
					<th ng-repeat='field in fields track by $index'>{[ field.field_label ]}</th>
					<th>&nbsp;</th>
					<th>&nbsp;</th>
				</tr>
			</thead>
			<tbody>
				<tr class='hover-link' ng-repeat='row in inData.field_rows track by $index'>
					<td ng-repeat='field in row track by $index'>
						<span ng-if="!editorFlags[$parent.$index].editing">{[ field.field_val ]}</span>
						<form-field ng-if="editorFlags[$parent.$index].editing" model='field.field_val' placeholder='{[ field.field_val ]}' type='{[ field.field_type ]}'></form-field>
					</td>
					<td>
						<a ng-class='(!editorFlags[$index].editing) ? "edit-link" : ""' ng-click='editItem($index)'>{[ editorFlags[$index].editing ? 'Done Editing' : 'Edit' ]}</a>
					</td>
					<td><a class='edit-link' ng-click='removeItem($index)'>Delete</a></td>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<td ng-repeat='f in fields track by $index'><form-field model='newItem[$index]' placeholder='{[ f.field_label ]}' type='{[ f.field_type ]}'></form-field></td>
					<td><input type="submit" class='btn btn-small btn-primary' value="Add {[label]}"></td>
					<td>&nbsp;</td>
				</tr>
			</tbody>
		</table>
	</fieldset>
</form>
